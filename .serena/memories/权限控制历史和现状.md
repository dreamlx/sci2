权限控制历史和现状分析

## 历史演进
1. **初始状态**: 只有admin角色，所有管理员权限相同
2. **需求变更**: 增加role属性，分为super_admin和admin
3. **权限降级**: admin从全权限降级为普通操作员
4. **技术方案**: 原计划使用CanCanCan，但因问题较多改为折衷处理

## 权限设计预期 (来自permission_control_plan.md)

### super_admin权限 (完整权限)
- 导入报表/数据 ✅
- 分配单据 ✅  
- 删除单据 ✅
- 手动更新单据状态 ✅
- 用户管理 ✅
- 费用类型/问题类型设置 ✅
- 查看数据 ✅
- 创建单据 ✅
- 编辑单据 ✅

### admin权限 (普通操作员)
- 查看数据 ✅
- 创建单据 ✅
- 编辑单据 ✅
- ❌ 导入数据
- ❌ 分配单据
- ❌ 删除单据
- ❌ 状态更新
- ❌ 用户管理
- ❌ 系统设置

## 当前Policy实现分析
从ReimbursementPolicy代码看:
- can_create?: 只有super_admin ❌ (应该admin也能create)
- can_update?: 只有super_admin ❌ (应该admin也能update)  
- can_assign?: 只有super_admin ✅ (符合预期)
- can_destroy?: 只有super_admin ✅ (符合预期)

## 问题总结
1. **Policy实现与设计不符**: admin应该能创建和编辑单据，但Policy中只允许super_admin
2. **Factory Trait混淆**: 测试中admin用户实际是super_admin角色
3. **技术债务**: CanCanCan方案遇到问题，改为折衷的Policy Object Pattern

## 需要确认的业务决策
1. **admin权限边界**: 是否确认admin可以创建和编辑单据？
2. **权限控制方案**: 继续Policy Object还是回到CanCanCan？
3. **ActiveAdmin集成**: 如何在ActiveAdmin中实施权限控制？