<div class="panel">
  <h3>添加沟通记录</h3>

  <div class="panel_contents">
    <div class="work-order-info">
      <h4>沟通工单信息</h4>
      <table>
        <tr>
          <th>工单ID</th>
          <td><%= @communication_work_order.id %></td>
        </tr>
        <tr>
          <th>报销单号</th>
          <td><%= @communication_work_order.reimbursement.invoice_number %></td>
        </tr>
        <tr>
          <th>状态</th>
          <td><%= @communication_work_order.status %></td>
        </tr>
        <tr>
          <th>问题类型</th>
          <td><%= @communication_work_order.problem_type %></td>
        </tr>
        <tr>
          <th>问题描述</th>
          <td><%= @communication_work_order.problem_description %></td>
        </tr>
      </table>
    </div>

    <%= semantic_form_for @communication_record, url: create_communication_record_admin_communication_work_order_path(@communication_work_order), method: :post do |f| %>
      <%= f.inputs do %>
        <%= f.input :content, label: "沟通内容", input_html: { rows: 5 }, required: true %>
        <%= f.input :communicator_role, label: "沟通人角色", as: :select, collection: CommunicatorRoleOptions.all, required: true %>
        <%= f.input :communicator_name, label: "沟通人姓名" %>
        <%= f.input :communication_method, label: "沟通方式", as: :select, collection: CommunicationMethodOptions.all, required: true %>
        <%= f.input :recorded_at, label: "沟通时间", as: :datetime_picker, input_html: { value: Time.current } %>
      <% end %>

      <div class="actions">
        <%= f.submit "添加记录", class: "button" %>
        <%= link_to "取消", admin_communication_work_order_path(@communication_work_order), class: "button" %>
      </div>
    <% end %>
  </div>
</div>

<style>
  .work-order-info {
    margin-bottom: 20px;
  }

  .work-order-info table {
    width: 100%;
    border-collapse: collapse;
  }

  .work-order-info th, .work-order-info td {
    padding: 8px;
    border: 1px solid #ddd;
    text-align: left;
  }

  .work-order-info th {
    width: 120px;
    background-color: #f5f5f5;
  }

  .actions {
    margin-top: 20px;
    text-align: right;
  }

  .button {
    margin-left: 10px;
  }
</style>