# SCI2 工单系统 UI/UX 用户故事与设计方案

## 1. 用户角色分析

在SCI2工单系统中，我们主要有以下几类用户角色：

1. **财务审核人员**：负责审核报销单和费用明细，创建和处理审核工单
2. **沟通专员**：负责与申请人沟通解决问题，创建和处理沟通工单
3. **系统管理员**：负责导入数据、管理系统配置和监控系统运行状态
4. **财务经理**：负责查看统计数据、监控工作进度和审批特殊情况

## 2. 仪表盘设计

仪表盘是系统的主页面，应该为不同角色的用户提供最重要的信息和快速访问常用功能的入口。

### 2.1 仪表盘布局

仪表盘采用卡片式布局，分为以下几个区域：

1. **顶部导航栏**：包含系统标题、用户信息、通知中心和退出按钮
2. **左侧菜单**：包含系统的主要功能模块入口
3. **状态统计卡片区**：显示报销单和工单的状态统计
4. **待处理工作区**：显示当前用户需要处理的工单列表
5. **最近活动区**：显示系统中的最近活动记录
6. **快速导入区**：提供数据导入的快捷入口

### 2.2 状态统计卡片

状态统计卡片以直观的方式展示系统中各类数据的状态分布：

1. **报销单状态统计**：
   - 待处理（pending）：显示数量和百分比
   - 处理中（processing）：显示数量和百分比
   - 等待完成（waiting_completion）：显示数量和百分比
   - 已关闭（closed）：显示数量和百分比

2. **工单状态统计**：
   - 待处理审核工单：显示数量
   - 处理中审核工单：显示数量
   - 待处理沟通工单：显示数量
   - 需要沟通工单：显示数量

3. **费用明细验证统计**：
   - 待验证（pending）：显示数量和百分比
   - 有问题（problematic）：显示数量和百分比
   - 已验证（verified）：显示数量和百分比

### 2.3 待处理工作区

待处理工作区显示当前用户需要处理的工单，按优先级和创建时间排序：

1. **待处理审核工单**：
   - 显示报销单号、创建时间、问题类型和操作按钮
   - 提供"开始处理"快捷按钮

2. **待处理沟通工单**：
   - 显示报销单号、创建时间、问题类型和操作按钮
   - 提供"开始处理"和"标记需沟通"快捷按钮

### 2.4 最近活动区

最近活动区显示系统中的最近活动记录，帮助用户了解系统动态：

1. **工单状态变更**：显示工单ID、类型、状态变更、操作人和时间
2. **费用明细验证**：显示费用明细ID、验证状态变更、操作人和时间
3. **数据导入记录**：显示导入类型、数量、操作人和时间

### 2.5 快速导入区

快速导入区提供数据导入的快捷入口，简化导入操作：

1. **导入报销单**：链接到报销单导入页面
2. **导入快递收单**：链接到快递收单导入页面
3. **导入费用明细**：链接到费用明细导入页面
4. **导入操作历史**：链接到操作历史导入页面

## 3. 报销单模块设计

报销单模块是系统的核心，用于管理和查看报销单信息。

### 3.1 报销单列表页

报销单列表页显示系统中的所有报销单，提供丰富的过滤和排序功能：

1. **过滤器**：
   - 报销单号：文本搜索
   - 申请人：文本搜索
   - 内部状态：下拉选择（待处理、处理中、等待完成、已关闭）
   - 外部状态：文本搜索
   - 收单状态：下拉选择（待收单、已收单）
   - 电子发票：是/否选择
   - 创建时间：日期范围选择
   - 审批日期：日期范围选择

2. **列表显示字段**：
   - 报销单号（可点击进入详情页）
   - 申请人
   - 金额（带货币符号）
   - 内部状态（带颜色标签）
   - 外部状态
   - 收单状态（带颜色标签）
   - 电子发票标志
   - 审批日期
   - 创建时间
   - 操作按钮

3. **批量操作**：
   - 标记为已收单：批量更新选中报销单的收单状态
   - 开始处理：批量将选中的待处理报销单标记为处理中

4. **导入按钮**：
   - 显示在列表页顶部，点击后进入报销单导入页面

### 3.2 报销单详情页

报销单详情页使用标签页设计，展示报销单的详细信息和关联数据：

1. **基本信息标签页**：
   - 显示报销单的所有字段，包括内部状态、外部状态、电子发票标志等
   - 使用适当的格式化和样式，提高可读性

2. **快递收单工单标签页**：
   - 显示与报销单关联的所有快递收单工单
   - 包括快递单号、收单时间、快递公司、状态等信息
   - 提供查看详情的链接

3. **审核工单标签页**：
   - 显示与报销单关联的所有审核工单
   - 包括状态、审核结果、审核日期、创建人等信息
   - 提供查看详情的链接
   - 提供"新建审核工单"按钮

4. **沟通工单标签页**：
   - 显示与报销单关联的所有沟通工单
   - 包括状态、发起人角色、创建人等信息
   - 提供查看详情的链接
   - 提供"新建沟通工单"按钮

5. **费用明细标签页**：
   - 显示与报销单关联的所有费用明细
   - 包括费用类型、金额、费用日期、验证状态等信息
   - 提供查看详情的链接

6. **操作历史标签页**：
   - 显示与报销单关联的所有操作历史记录
   - 包括操作类型、操作人、操作时间、操作意见等信息

### 3.3 新建审核工单页面

新建审核工单页面只能从报销单详情页进入，确保审核工单与报销单的关联：

1. **基本信息区域**：
   - 显示关联报销单信息（只读）
   - 状态字段（默认为pending）
   - 问题类型下拉列表（Req 6）
   - 问题说明下拉列表（Req 6）
   - 备注说明文本框（Req 6）
   - 处理意见下拉列表（Req 6）
   - 审核意见文本框
   - 增值税已验证复选框

2. **费用明细选择区域**：
   - 显示报销单的所有费用明细，以复选框形式
   - 包括费用明细ID、费用类型、金额、费用日期、验证状态等信息
   - 提供全选/取消全选功能

3. **提交按钮**：
   - 验证必填字段（至少选择一条费用明细）
   - 创建审核工单并关联选中的费用明细
   - 成功后跳转到审核工单详情页

## 4. 工单模块设计

工单模块包括三种类型的工单：快递收单工单、审核工单和沟通工单。

### 4.1 审核工单详情页

审核工单详情页使用标签页设计，展示审核工单的详细信息和关联数据：

1. **基本信息标签页**：
   - 显示审核工单的所有字段，包括状态、问题类型、问题说明、备注、处理意见等
   - 使用适当的格式化和样式，提高可读性

2. **费用明细标签页**：
   - 显示与审核工单关联的所有费用明细
   - 包括费用明细ID、费用类型、金额、全局状态、工单内状态、验证意见等信息
   - 提供"更新验证状态"操作按钮

3. **沟通工单标签页**：
   - 显示与审核工单关联的所有沟通工单
   - 包括状态、创建人、创建时间等信息
   - 提供查看详情的链接

4. **状态变更历史标签页**：
   - 显示审核工单的状态变更历史记录
   - 包括原状态、新状态、变更时间、操作人等信息

5. **操作按钮**：
   - 根据当前状态显示不同的操作按钮
   - pending状态：显示"开始处理"按钮
   - processing状态：显示"审核通过"和"审核拒绝"按钮

### 4.2 沟通工单详情页

沟通工单详情页使用标签页设计，展示沟通工单的详细信息和关联数据：

1. **基本信息标签页**：
   - 显示沟通工单的所有字段，包括状态、关联审核工单、沟通方式、发起人角色、问题类型、问题说明、备注、处理意见、解决方案摘要等
   - 使用适当的格式化和样式，提高可读性

2. **沟通记录标签页**：
   - 显示与沟通工单关联的所有沟通记录
   - 包括沟通角色、沟通人、沟通方式、沟通内容、记录时间等信息
   - 提供"添加沟通记录"按钮

3. **费用明细标签页**：
   - 显示与沟通工单关联的所有费用明细
   - 包括费用明细ID、费用类型、金额、全局状态、工单内状态、验证意见等信息
   - 提供"更新验证状态"操作按钮

4. **状态变更历史标签页**：
   - 显示沟通工单的状态变更历史记录
   - 包括原状态、新状态、变更时间、操作人等信息

5. **操作按钮**：
   - 根据当前状态显示不同的操作按钮
   - pending状态：显示"开始处理"和"标记需沟通"按钮
   - processing或needs_communication状态：显示"沟通后通过"和"沟通后拒绝"按钮
   - 所有状态：显示"添加沟通记录"按钮

### 4.3 费用明细验证页面

费用明细验证页面用于更新费用明细的验证状态，可以从审核工单或沟通工单详情页进入：

1. **费用明细信息区域**：
   - 显示费用明细的基本信息，包括费用类型、金额、费用日期等（只读）
   - 显示当前全局状态和工单内状态

2. **验证状态更新区域**：
   - 验证状态下拉列表（pending、problematic、verified）
   - 验证意见文本框

3. **提交按钮**：
   - 更新费用明细的验证状态和验证意见
   - 成功后返回工单详情页

### 4.4 沟通记录添加页面

沟通记录添加页面用于添加沟通工单的沟通记录，可以从沟通工单详情页进入：

1. **沟通记录信息区域**：
   - 沟通内容文本框（必填）
   - 沟通角色下拉列表（必填）
   - 沟通人姓名文本框（默认为当前用户）
   - 沟通方式下拉列表（必填）

2. **提交按钮**：
   - 创建沟通记录并关联到沟通工单
   - 成功后返回沟通工单详情页

## 5. 用户交互流程

### 5.1 报销单导入与处理流程

1. 用户在仪表盘或报销单列表页点击"导入报销单"按钮
2. 系统显示报销单导入页面，用户选择文件并提交
3. 系统导入报销单数据，显示导入结果
4. 用户在报销单列表页查看导入的报销单
5. 用户点击报销单号进入报销单详情页
6. 用户在报销单详情页查看报销单信息和关联数据
7. 用户点击"新建审核工单"按钮，进入新建审核工单页面
8. 用户填写审核工单信息，选择费用明细，提交表单
9. 系统创建审核工单，跳转到审核工单详情页
10. 用户在审核工单详情页点击"开始处理"按钮
11. 系统更新审核工单状态为processing，关联费用明细状态为problematic
12. 用户处理完成后，点击"审核通过"或"审核拒绝"按钮
13. 系统更新审核工单状态为approved或rejected，关联费用明细状态相应更新
14. 如果需要沟通，用户可以在报销单详情页点击"新建沟通工单"按钮
15. 用户填写沟通工单信息，选择费用明细，提交表单
16. 系统创建沟通工单，跳转到沟通工单详情页
17. 用户在沟通工单详情页点击"开始处理"或"标记需沟通"按钮
18. 系统更新沟通工单状态，关联费用明细状态为problematic
19. 用户点击"添加沟通记录"按钮，记录沟通内容
20. 沟通完成后，用户点击"沟通后通过"或"沟通后拒绝"按钮
21. 系统更新沟通工单状态为approved或rejected，关联费用明细状态相应更新

### 5.2 快递收单导入流程

1. 用户在仪表盘或快递收单工单列表页点击"导入快递收单"按钮
2. 系统显示快递收单导入页面，用户选择文件并提交
3. 系统导入快递收单数据，自动创建快递收单工单（状态为completed）
4. 系统更新关联报销单的收单状态为received，内部状态为processing
5. 用户在快递收单工单列表页查看导入的快递收单工单
6. 用户点击快递收单工单ID进入详情页查看详细信息

### 5.3 费用明细导入流程

1. 用户在仪表盘或费用明细列表页点击"导入费用明细"按钮
2. 系统显示费用明细导入页面，用户选择文件并提交
3. 系统导入费用明细数据，初始验证状态为pending
4. 用户在费用明细列表页查看导入的费用明细
5. 用户点击费用明细ID进入详情页查看详细信息和关联工单

### 5.4 操作历史导入流程

1. 用户在仪表盘或操作历史列表页点击"导入操作历史"按钮
2. 系统显示操作历史导入页面，用户选择文件并提交
3. 系统导入操作历史数据，检查是否包含"审批通过"记录
4. 如果包含"审批通过"记录，系统自动更新关联报销单状态为closed
5. 用户在操作历史列表页查看导入的操作历史记录

## 6. 数据展示与可视化

### 6.1 仪表盘数据展示

1. **状态统计卡片**：
   - 使用饼图或环形图显示报销单和工单的状态分布
   - 使用不同颜色区分不同状态，提高直观性
   - 显示数量和百分比，便于用户了解整体情况

2. **待处理工作列表**：
   - 使用表格形式显示待处理工单
   - 按优先级和创建时间排序，突出显示紧急任务
   - 提供快捷操作按钮，简化工作流程

3. **最近活动时间线**：
   - 使用时间线形式显示最近活动
   - 按时间倒序排列，最新活动显示在顶部
   - 使用图标区分不同类型的活动，提高可读性

### 6.2 报销单数据展示

1. **报销单状态标签**：
   - 内部状态：使用不同颜色的标签显示（pending-灰色、processing-蓝色、waiting_completion-橙色、closed-绿色）
   - 外部状态：直接显示原始值
   - 电子发票标志：使用图标或标签显示

2. **报销单详情页标签页**：
   - 使用标签页组织不同类型的信息，减少页面复杂度
   - 在标签名称旁显示数量，如"审核工单 (3)"，提供数量提示
   - 使用表格形式显示关联数据，便于浏览和比较

### 6.3 工单数据展示

1. **工单状态标签**：
   - 审核工单：pending-灰色、processing-蓝色、approved-绿色、rejected-红色
   - 沟通工单：pending-灰色、processing-蓝色、needs_communication-紫色、approved-绿色、rejected-红色
   - 快递收单工单：completed-绿色

2. **工单详情页标签页**：
   - 使用标签页组织不同类型的信息，减少页面复杂度
   - 在标签名称旁显示数量，提供数量提示
   - 使用表格形式显示关联数据，便于浏览和比较

3. **沟通记录展示**：
   - 使用聊天气泡形式显示沟通记录，区分不同角色
   - 按时间顺序排列，最新记录显示在底部
   - 显示沟通时间、沟通人和沟通方式

## 7. 响应式设计

为了确保系统在不同设备上都能良好运行，我们将采用响应式设计：

1. **桌面端**：
   - 使用多列布局，充分利用屏幕空间
   - 显示详细信息和操作按钮
   - 支持键盘快捷键，提高操作效率

2. **平板端**：
   - 使用适应平板屏幕的布局，减少列数
   - 保留主要功能和信息
   - 优化触摸交互，增大按钮和可点击区域

3. **移动端**：
   - 使用单列布局，确保内容可读性
   - 简化界面，只显示最重要的信息
   - 提供返回顶部按钮，便于长页面浏览

## 8. 总结

SCI2工单系统的UI/UX设计以用户为中心，注重用户体验和工作效率。通过直观的仪表盘、清晰的数据展示和流畅的交互流程，帮助用户高效完成报销单审核和沟通工作。系统界面简洁明了，操作逻辑符合用户习惯，同时提供足够的信息和功能支持用户的日常工作。

在实现过程中，我们将遵循以下原则：

1. **一致性**：保持界面风格、交互方式和术语的一致性
2. **简洁性**：减少不必要的元素，突出重要信息和操作
3. **可用性**：确保界面易于理解和使用，减少学习成本
4. **响应性**：确保系统在不同设备上都能良好运行
5. **可访问性**：考虑不同用户的需求，提供适当的辅助功能

通过这些设计，SCI2工单系统将成为一个高效、易用的报销单审核和沟通平台，帮助用户更好地完成工作。