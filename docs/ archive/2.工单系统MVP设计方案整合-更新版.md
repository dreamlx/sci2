# å·¥å•ç³»ç»ŸMVPè®¾è®¡æ–¹æ¡ˆæ•´åˆï¼ˆæ›´æ–°ç‰ˆï¼‰

## ç›®å½•

- [MVPèŒƒå›´å®šä¹‰](#mvpèŒƒå›´å®šä¹‰)
  - [åŒ…å«åŠŸèƒ½](#åŒ…å«åŠŸèƒ½)
  - [ä¸åŒ…å«åŠŸèƒ½](#ä¸åŒ…å«åŠŸèƒ½)
  - [ä¼˜å…ˆçº§è°ƒæ•´](#ä¼˜å…ˆçº§è°ƒæ•´)
- [æ•°æ®æ¨¡å‹](#æ•°æ®æ¨¡å‹)
  - [æŠ¥é”€å•(Reimbursement)è¡¨](#1-æŠ¥é”€å•reimbursementè¡¨)
  - [å¿«é€’æ”¶å•(ExpressReceipt)è¡¨](#2-å¿«é€’æ”¶å•expressreceiptè¡¨)
  - [æ“ä½œå†å²(OperationHistory)è¡¨](#3-æ“ä½œå†å²operationhistoryè¡¨)
  - [è´¹ç”¨æ˜ç»†(FeeDetail)è¡¨](#4-è´¹ç”¨æ˜ç»†feedetailè¡¨)
  - [å·¥å•(WorkOrder)è¡¨](#5-å·¥å•workorderè¡¨)
  - [æ²Ÿé€šè®°å½•(CommunicationRecord)è¡¨](#6-æ²Ÿé€šè®°å½•communicationrecordè¡¨)
  - [è´¹ç”¨æ˜ç»†é€‰æ‹©(FeeDetailSelection)è¡¨](#7-è´¹ç”¨æ˜ç»†é€‰æ‹©feedetailselectionè¡¨)
  - [å·¥å•çŠ¶æ€å˜æ›´(WorkOrderStatusChange)è¡¨](#8-å·¥å•çŠ¶æ€å˜æ›´workorderstatuschangeè¡¨)
- [ä¸šåŠ¡é€»è¾‘](#ä¸šåŠ¡é€»è¾‘)
  - [æ•°æ®å¯¼å…¥é€»è¾‘](#1-æ•°æ®å¯¼å…¥é€»è¾‘)
  - [å·¥å•å¤„ç†æµç¨‹](#2-å·¥å•å¤„ç†æµç¨‹)
  - [å·¥å•çŠ¶æ€æµè½¬](#3-å·¥å•çŠ¶æ€æµè½¬)
  - [å¤šè½®æ²Ÿé€šæµç¨‹](#4-å¤šè½®æ²Ÿé€šæµç¨‹)
- [ç”¨æˆ·ç•Œé¢è®¾è®¡](#ç”¨æˆ·ç•Œé¢è®¾è®¡)
- [æŠ€æœ¯å®ç°æ–¹æ¡ˆ](#æŠ€æœ¯å®ç°æ–¹æ¡ˆ)
- [å¼€å‘è®¡åˆ’](#å¼€å‘è®¡åˆ’)
- [ä½¿ç”¨æµç¨‹](#ä½¿ç”¨æµç¨‹)
- [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)
- [åç»­æ‰©å±•è®¡åˆ’](#åç»­æ‰©å±•è®¡åˆ’)

## MVPèŒƒå›´å®šä¹‰

### åŒ…å«åŠŸèƒ½
- å¯¼å…¥å››ç§CSVæ•°æ®ï¼ˆæŠ¥é”€å•ã€å¿«é€’æ”¶å•ã€æ“ä½œå†å²ã€è´¹ç”¨æ˜ç»†ï¼‰ï¼Œ**ç¡®ä¿æ­£ç¡®çš„å¯¼å…¥é¡ºåº**
- å¿«é€’æ”¶å•ä¸æŠ¥é”€å•çš„åŒ¹é…æ£€æŸ¥ï¼Œæç¤ºæœªåŒ¹é…é¡¹
- åŸºäºåŒ¹é…æˆåŠŸçš„å¿«é€’æ”¶å•è‡ªåŠ¨ç”Ÿæˆå·¥å•
- æ”¯æŒè´¹ç”¨æ˜ç»†å¤šé€‰å¹¶å…³è”åˆ°å·¥å•ï¼Œæ ¹æ®å•å·è‡ªåŠ¨å…³è”
- åŸºäºå·¥å•çš„å¤šè½®æ²Ÿé€šè®°å½•ç®¡ç†
- åŸºäºç”²æ–¹æ“ä½œå†å²å…³é—­æŠ¥é”€å•
- ç»Ÿä¸€çš„å·¥å•çŠ¶æ€æµè½¬ç³»ç»Ÿ
- å·¥å•å…³è”å…³ç³»è¿½è¸ª
- å·¥å•çŠ¶æ€å˜æ›´å†å²è®°å½•
- åŸºæœ¬çš„ç”¨æˆ·ç•Œé¢

### ä¸åŒ…å«åŠŸèƒ½
- å·¥å•åˆ†é…åŠŸèƒ½ï¼ˆå‡è®¾ä¸€ä¸ªäººä»å¤´åšåˆ°å°¾ï¼‰
- å·¥ä½œé‡ç»Ÿè®¡å’Œæ•°æ®å¯¼å‡º
- å¤šçº§å®¡æ ¸æµç¨‹
- å¤æ‚çš„æƒé™ç®¡ç†

### ä¼˜å…ˆçº§è°ƒæ•´
1. æŠ¥é”€å•å¯¼å…¥ä¸åŸºç¡€æ•°æ®å»ºç«‹
2. å¿«é€’æ”¶å•å¯¼å…¥ä¸åŒ¹é…æ£€æŸ¥
3. è´¹ç”¨æ˜ç»†å¤šé€‰åŠŸèƒ½
4. ç»Ÿä¸€çš„å·¥å•çŠ¶æ€æµè½¬ç³»ç»Ÿ
5. å·¥å•å…³è”å…³ç³»è¿½è¸ª
6. å¤šè½®æ²Ÿé€šè®°å½•ç®¡ç†
7. æ“ä½œå†å²å¤„ç†ä¸æŠ¥é”€å•å…³é—­
## æ•°æ®æ¨¡å‹

### 1. æŠ¥é”€å•(Reimbursement)è¡¨
```ruby
create_table :reimbursements do |t|
  t.string :invoice_number, index: { unique: true }  # æŠ¥é”€å•å•å·
  t.string :document_name                            # å•æ®åç§°
  t.string :applicant                                # ç”³è¯·äºº
  t.string :applicant_id                             # ç”³è¯·äººå·¥å·
  t.string :company                                  # å…¬å¸
  t.string :department                               # éƒ¨é—¨
  t.decimal :amount, precision: 10, scale: 2         # é‡‘é¢
  t.string :receipt_status                           # æ”¶å•çŠ¶æ€
  t.string :reimbursement_status                     # æŠ¥é”€å•çŠ¶æ€
  t.datetime :receipt_date                           # æ”¶å•æ—¥æœŸ
  t.datetime :submission_date                        # æäº¤æ—¥æœŸ
  t.string :document_tags                            # å•æ®æ ‡ç­¾
  t.boolean :is_electronic, default: false           # æ˜¯å¦ç”µå­å‘ç¥¨
  t.boolean :is_complete, default: false             # æ˜¯å¦å®Œæˆ
  
  t.timestamps
end
```

### 2. å¿«é€’æ”¶å•(ExpressReceipt)è¡¨
```ruby
create_table :express_receipts do |t|
  t.string :document_number                          # æŠ¥é”€å•å•å·
  t.string :tracking_number                          # å¿«é€’å•å·
  t.datetime :receive_date                           # æ”¶ä»¶æ—¥æœŸ
  t.string :receiver                                 # æ”¶ä»¶äºº
  t.string :courier_company                          # å¿«é€’å…¬å¸
  
  t.timestamps
  
  t.index :document_number
  t.index :tracking_number
end
```

### 3. æ“ä½œå†å²(OperationHistory)è¡¨
```ruby
create_table :operation_histories do |t|
  t.string :document_number                          # æŠ¥é”€å•å•å·
  t.string :operation_type                           # æ“ä½œç±»å‹
  t.datetime :operation_time                         # æ“ä½œæ—¶é—´
  t.string :operator                                 # æ“ä½œäºº
  t.text :notes                                      # æ“ä½œæ„è§
  
  t.timestamps
  
  t.index :document_number
end
```

### 4. è´¹ç”¨æ˜ç»†(FeeDetail)è¡¨
```ruby
create_table :fee_details do |t|
  t.string :document_number                          # æŠ¥é”€å•å•å·
  t.string :fee_type                                 # è´¹ç”¨ç±»å‹
  t.decimal :amount, precision: 10, scale: 2         # é‡‘é¢
  t.string :currency, default: "CNY"                 # å¸ç§
  t.datetime :fee_date                               # è´¹ç”¨å‘ç”Ÿæ—¥æœŸ
  t.string :payment_method                           # æ”¯ä»˜æ–¹å¼
  t.string :verification_status, default: "pending"  # éªŒè¯çŠ¶æ€
  
  t.timestamps
  
  t.index :document_number
end
```

### 5. å·¥å•(WorkOrder)è¡¨
```ruby
create_table :work_orders do |t|
  t.string :order_number                             # å·¥å•å·
  t.string :document_number                          # æŠ¥é”€å•å•å·
  t.string :order_type                               # å·¥å•ç±»å‹
  t.string :status, default: "pending"               # çŠ¶æ€
  t.datetime :creation_time                          # åˆ›å»ºæ—¶é—´
  t.datetime :completion_time                        # å®Œæˆæ—¶é—´
  t.text :description                                # æè¿°
  t.text :result                                     # ç»“æœ
  t.string :related_tracking_number                  # å…³è”å¿«é€’å•å·
  t.integer :communication_count, default: 0         # æ²Ÿé€šæ¬¡æ•°
  t.datetime :last_communication_date                # æœ€åæ²Ÿé€šæ—¶é—´
  t.boolean :pending_reply, default: false           # æ˜¯å¦ç­‰å¾…å›å¤
  t.integer :parent_work_order_id                    # çˆ¶å·¥å•ID
  t.string :type                                     # å•è¡¨ç»§æ‰¿ç±»å‹
  
  # å¿«é€’æ”¶å•å·¥å•ç‰¹å®šå­—æ®µ
  t.datetime :received_date                          # ç­¾æ”¶æ—¥æœŸ
  
  # å®¡æ ¸å·¥å•ç‰¹å®šå­—æ®µ
  t.string :audit_result                             # å®¡æ ¸ç»“æœ
  t.datetime :audit_date                             # å®¡æ ¸æ—¥æœŸ
  t.text :audit_comment                              # å®¡æ ¸æ„è§
  t.string :audit_issue_type                         # å®¡æ ¸é—®é¢˜ç±»å‹
  t.boolean :vat_verified                            # VATéªŒè¯
  t.text :revocation_reason                          # æ’¤é”€åŸå› 
  t.datetime :revocation_time                        # æ’¤é”€æ—¶é—´
  t.text :pending_approval_reason                    # å®¡æ ¸æš‚ç¼“åŸå› 
  t.datetime :pending_approval_date                  # å®¡æ ¸æš‚ç¼“æ—¥æœŸ
  
  # é—®é¢˜å·¥å•ç‰¹å®šå­—æ®µ
  t.datetime :issue_resolved_date                    # é—®é¢˜è§£å†³æ—¥æœŸ
  t.text :issue_resolution                           # é—®é¢˜è§£å†³æ–¹æ¡ˆ
  
  t.timestamps
  
  t.index :order_number, unique: true
  t.index :document_number
  t.index :parent_work_order_id
end
```

### 6. æ²Ÿé€šè®°å½•(CommunicationRecord)è¡¨
```ruby
create_table :communication_records do |t|
  t.references :work_order, foreign_key: true
  t.string :communicator_role                        # è´¢åŠ¡/ç”³è¯·äºº
  t.string :communicator_name
  t.text :content
  t.datetime :communication_time
  t.string :communication_method                     # ç”µè¯/é‚®ä»¶/ç³»ç»Ÿå†…
  t.string :status                                   # å·²å‘é€/å·²å›å¤/å·²è§£å†³
  t.string :category                                 # é—®é¢˜ç±»åˆ«
  t.text :question                                   # é—®é¢˜æè¿°
  t.text :material                                   # ææ–™è¦æ±‚
  t.string :problem_status                           # é—®é¢˜çŠ¶æ€
  t.references :fee_detail, foreign_key: true        # å…³è”è´¹ç”¨æ˜ç»†
  
  t.timestamps
end
```

### 7. è´¹ç”¨æ˜ç»†é€‰æ‹©(FeeDetailSelection)è¡¨
```ruby
create_table :fee_detail_selections do |t|
  t.references :work_order, foreign_key: true
  t.references :fee_detail, foreign_key: true
  t.string :verification_status                      # å¾…éªŒè¯/éªŒè¯ä¸­/å·²éªŒè¯/æœ‰é—®é¢˜
  t.text :discussion_result
  
  t.timestamps
  
  t.index [:work_order_id, :fee_detail_id], unique: true
end
```

### 8. å·¥å•çŠ¶æ€å˜æ›´(WorkOrderStatusChange)è¡¨
```ruby
create_table :work_order_status_changes do |t|
  t.references :work_order, null: false, foreign_key: true
  t.string :from_status                              # å˜æ›´å‰çŠ¶æ€
  t.string :to_status, null: false                   # å˜æ›´åçŠ¶æ€
  t.string :operator                                 # æ“ä½œäºº
  t.text :reason                                     # å˜æ›´åŸå› 
  t.datetime :changed_at, null: false                # å˜æ›´æ—¶é—´

  t.timestamps
  
  t.index [:work_order_id, :changed_at]
end
```
## ä¸šåŠ¡é€»è¾‘

### 1. æ•°æ®å¯¼å…¥é€»è¾‘

#### å¿«é€’æ”¶å•å¯¼å…¥
```ruby
def import_express_receipts(file)
  unmatched_receipts = []
  matched_receipts = []
  
  CSV.foreach(file.path, headers: true) do |row|
    document_number = extract_document_number(row)
    
    # æ£€æŸ¥æ˜¯å¦å­˜åœ¨åŒ¹é…çš„æŠ¥é”€å•
    reimbursement = Reimbursement.find_by(invoice_number: document_number)
    
    if reimbursement
      # åˆ›å»ºå¿«é€’æ”¶å•è®°å½•å¹¶å…³è”åˆ°æŠ¥é”€å•
      receipt = ExpressReceipt.create!(
        document_number: document_number,
        tracking_number: extract_tracking_number(row),
        receive_date: parse_date(row['æ“ä½œæ—¶é—´']),
        receiver: row['æ“ä½œäºº'],
        courier_company: extract_courier_company(row)
      )
      
      # æ›´æ–°æŠ¥é”€å•æ”¶å•çŠ¶æ€
      reimbursement.update(receipt_status: 'received', receipt_date: receipt.receive_date)
      
      # è‡ªåŠ¨ç”Ÿæˆå·¥å•
      work_order = ExpressReceiptWorkOrder.create!(
        order_number: generate_order_number,
        document_number: document_number,
        creation_time: Time.now,
        operator: current_user.email,
        status: WorkOrder::STATUS_PENDING,
        description: "å¿«é€’æ”¶å•å·¥å•ï¼Œå•å·: #{document_number}ï¼Œå¿«é€’å•å·: #{receipt.tracking_number}",
        related_tracking_number: receipt.tracking_number
      )
      
      matched_receipts << {
        receipt: receipt,
        work_order: work_order
      }
    else
      # è®°å½•æœªåŒ¹é…çš„å¿«é€’å•
      unmatched_receipts << {
        original_data: row.to_h,
        document_number: document_number
      }
    end
  end
  
  # è¿”å›å¤„ç†ç»“æœ
  return {
    matched: matched_receipts,
    unmatched: unmatched_receipts
  }
end
```

#### æŠ¥é”€å•å¯¼å…¥
- æ£€æŸ¥æŠ¥é”€å•æ˜¯å¦å­˜åœ¨
- æ›´æ–°æˆ–åˆ›å»ºæŠ¥é”€å•è®°å½•
- å¦‚æœæ˜¯æ–°æŠ¥é”€å•ä¸”ä¸æ˜¯ç”µå­å‘ç¥¨ï¼Œåˆ›å»ºå®¡æ ¸å·¥å•

#### æ“ä½œå†å²å¯¼å…¥
```ruby
def import_operation_histories(file)
  updated_reimbursements = []
  
  CSV.foreach(file.path, headers: true) do |row|
    document_number = row['å•æ®ç¼–å·']
    operation_type = row['æ“ä½œç±»å‹']
    
    # åˆ›å»ºæ“ä½œå†å²è®°å½•
    history = OperationHistory.create!(
      document_number: document_number,
      operation_type: operation_type,
      operation_time: parse_date(row['æ“ä½œæ—¥æœŸ']),
      operator: row['æ“ä½œäºº'],
      notes: row['æ“ä½œæ„è§']
    )
    
    # æŸ¥æ‰¾å¯¹åº”çš„æŠ¥é”€å•
    reimbursement = Reimbursement.find_by(invoice_number: document_number)
    if reimbursement
      # æ£€æŸ¥æ˜¯å¦ä¸ºå®¡æ‰¹ç›¸å…³æ“ä½œ
      if operation_type.include?('å®¡æ‰¹') || operation_type.include?('å®¡æ‰¹é€šè¿‡')
        # æ›´æ–°æŠ¥é”€å•çŠ¶æ€ä¸ºå·²å…³é—­
        reimbursement.update(
          reimbursement_status: 'closed',
          is_complete: true
        )
        
        updated_reimbursements << reimbursement
      end
    end
  end
  
  return updated_reimbursements
end
```

#### è´¹ç”¨æ˜ç»†å¯¼å…¥
- å…³è”åˆ°å¯¹åº”çš„æŠ¥é”€å•
- æ›´æ–°è´¹ç”¨æ˜ç»†éªŒè¯çŠ¶æ€

### 2. å·¥å•å¤„ç†æµç¨‹

#### å¿«é€’æ”¶å•å·¥å•æµç¨‹
```mermaid
flowchart TD
    A[åˆ›å»ºå¿«é€’æ”¶å•å·¥å•] --> B[å¾…å¤„ç†]
    B --> C[å¤„ç†ä¸­]
    C --> D[å·²ç­¾æ”¶]
    D --> E[å·²å®Œæˆ]
    E --> F[è‡ªåŠ¨åˆ›å»ºå®¡æ ¸å·¥å•]
```

#### å®¡æ ¸å·¥å•æµç¨‹
```mermaid
flowchart TD
    A[åˆ›å»ºå®¡æ ¸å·¥å•] --> B[å¾…å¤„ç†]
    B --> C[å¤„ç†ä¸­]
    C --> D[å®¡æ ¸ä¸­]
    D --> E{å®¡æ ¸ç»“æœ?}
    E -->|é€šè¿‡| F[å®¡æ ¸é€šè¿‡]
    E -->|ä¸é€šè¿‡| G[å®¡æ ¸ä¸é€šè¿‡]
    E -->|æš‚ç¼“| H[å®¡æ ¸æš‚ç¼“]
    F --> I[å·²å®Œæˆ]
    G --> I
    H --> J[åˆ›å»ºé—®é¢˜å·¥å•]
    H --> K[é‡æ–°å®¡æ ¸]
    K --> D
```

#### é—®é¢˜å·¥å•æµç¨‹
```mermaid
flowchart TD
    A[åˆ›å»ºé—®é¢˜å·¥å•] --> B[å¾…å¤„ç†]
    B --> C[å¤„ç†ä¸­]
    C --> D[éœ€æ²Ÿé€š]
    D --> E[ç­‰å¾…å›å¤]
    E --> F[å·²å›å¤]
    F --> G{é—®é¢˜è§£å†³?}
    G -->|å¦| D
    G -->|æ˜¯| H[é—®é¢˜å·²è§£å†³]
    H --> I[å·²å®Œæˆ]
```

### 3. å·¥å•çŠ¶æ€æµè½¬

#### åŸºç¡€çŠ¶æ€ï¼ˆæ‰€æœ‰å·¥å•å…±äº«ï¼‰
```mermaid
stateDiagram-v2
    [*] --> å¾…å¤„ç†: å·¥å•åˆ›å»º
    å¾…å¤„ç† --> å¤„ç†ä¸­: å¼€å§‹å¤„ç†
    å¤„ç†ä¸­ --> å·²å®Œæˆ: å®Œæˆå¤„ç†
    å¤„ç†ä¸­ --> å·²å–æ¶ˆ: å–æ¶ˆå·¥å•
    å·²å®Œæˆ --> [*]
    å·²å–æ¶ˆ --> [*]
```

#### å¿«é€’æ”¶å•å·¥å•ç‰¹å®šçŠ¶æ€
```mermaid
stateDiagram-v2
    [*] --> å¾…å¤„ç†: å·¥å•åˆ›å»º
    å¾…å¤„ç† --> å¤„ç†ä¸­: å¼€å§‹å¤„ç†
    å¤„ç†ä¸­ --> å·²ç­¾æ”¶: ç¡®è®¤æ”¶åˆ°å¿«é€’
    å·²ç­¾æ”¶ --> å·²å®Œæˆ: å®Œæˆå¤„ç†å¹¶åˆ›å»ºå®¡æ ¸å·¥å•
    å¤„ç†ä¸­ --> å·²å–æ¶ˆ: å–æ¶ˆå·¥å•
    å·²å®Œæˆ --> [*]
    å·²å–æ¶ˆ --> [*]
```

#### å®¡æ ¸å·¥å•ç‰¹å®šçŠ¶æ€
```mermaid
stateDiagram-v2
    [*] --> å¾…å¤„ç†: å·¥å•åˆ›å»º
    å¾…å¤„ç† --> å¤„ç†ä¸­: å¼€å§‹å¤„ç†
    å¤„ç†ä¸­ --> å®¡æ ¸ä¸­: å¼€å§‹å®¡æ ¸
    å®¡æ ¸ä¸­ --> å®¡æ ¸é€šè¿‡: å®¡æ ¸ç»“æœä¸ºé€šè¿‡
    å®¡æ ¸ä¸­ --> å®¡æ ¸ä¸é€šè¿‡: å®¡æ ¸ç»“æœä¸ºä¸é€šè¿‡
    å®¡æ ¸ä¸­ --> å®¡æ ¸æš‚ç¼“: å®¡æ ¸ç»“æœä¸ºæš‚ç¼“
    å®¡æ ¸é€šè¿‡ --> å·²å®Œæˆ: å®Œæˆå¤„ç†
    å®¡æ ¸ä¸é€šè¿‡ --> å·²å®Œæˆ: å®Œæˆå¤„ç†
    å®¡æ ¸æš‚ç¼“ --> å®¡æ ¸ä¸­: é‡æ–°å®¡æ ¸
    å¤„ç†ä¸­ --> å·²å–æ¶ˆ: å–æ¶ˆå·¥å•
    å·²å®Œæˆ --> [*]
    å·²å–æ¶ˆ --> [*]
```

#### é—®é¢˜å·¥å•ç‰¹å®šçŠ¶æ€
```mermaid
stateDiagram-v2
    [*] --> å¾…å¤„ç†: å·¥å•åˆ›å»º
    å¾…å¤„ç† --> å¤„ç†ä¸­: å¼€å§‹å¤„ç†
    å¤„ç†ä¸­ --> éœ€æ²Ÿé€š: å‘ç°é—®é¢˜éœ€æ²Ÿé€š
    éœ€æ²Ÿé€š --> ç­‰å¾…å›å¤: å·²å‘é€æ²Ÿé€š
    ç­‰å¾…å›å¤ --> å·²å›å¤: æ”¶åˆ°å›å¤
    å·²å›å¤ --> éœ€æ²Ÿé€š: é—®é¢˜æœªè§£å†³
    å·²å›å¤ --> é—®é¢˜å·²è§£å†³: é—®é¢˜å·²è§£å†³
    é—®é¢˜å·²è§£å†³ --> å·²å®Œæˆ: å®Œæˆå¤„ç†
    å¤„ç†ä¸­ --> å·²å–æ¶ˆ: å–æ¶ˆå·¥å•
    å·²å®Œæˆ --> [*]
    å·²å–æ¶ˆ --> [*]
```

### 4. å¤šè½®æ²Ÿé€šæµç¨‹

å·¥å•å¤„ç†è¿‡ç¨‹ä¸­çš„å¤šè½®æ²Ÿé€šæµç¨‹ï¼š
1. åˆ›å»ºå·¥å•å¹¶é€‰æ‹©ç›¸å…³è´¹ç”¨æ˜ç»†
2. å®¡æ ¸è¿‡ç¨‹ä¸­å‘ç°é—®é¢˜ï¼Œåˆ›å»ºæ²Ÿé€šè®°å½•
3. é€šçŸ¥æŠ¥é”€äººå¹¶ç­‰å¾…å›å¤
4. è®°å½•æŠ¥é”€äººå›å¤
5. å¦‚é—®é¢˜æœªè§£å†³ï¼Œç»§ç»­æ²Ÿé€š
6. å¦‚é—®é¢˜å·²è§£å†³ï¼Œæ›´æ–°è´¹ç”¨æ˜ç»†éªŒè¯çŠ¶æ€
7. æ‰€æœ‰é—®é¢˜è§£å†³åï¼Œå®Œæˆå·¥å•

```ruby
# åœ¨CommunicationWorkOrderæ¨¡å‹ä¸­
def initiate_communication
  # æ ‡è®°ä¸ºéœ€è¦æ²Ÿé€š
  need_communication
end

def send_communication_record(params)
  # åˆ›å»ºæ²Ÿé€šè®°å½•
  record = add_communication(params)
  
  # æ›´æ–°å·¥å•çŠ¶æ€ä¸ºç­‰å¾…å›å¤
  send_communication
  update(
    pending_reply: true,
    last_communication_date: Time.current
  )
  
  record
end

def record_reply(params)
  # åˆ›å»ºå›å¤è®°å½•
  record = add_communication(params)
  
  # æ›´æ–°å·¥å•çŠ¶æ€ä¸ºå·²å›å¤
  receive_reply
  update(
    pending_reply: false,
    last_communication_date: Time.current
  )
  
  record
end

def continue_issue_communication
  # ç»§ç»­æ²Ÿé€šï¼ˆé—®é¢˜æœªè§£å†³ï¼‰
  continue_communication
  update(
    pending_reply: false
  )
end

def mark_issue_resolved(resolution_text)
  # æ ‡è®°é—®é¢˜å·²è§£å†³
  resolve_issue
  update(
    pending_reply: false,
    result: resolution_text,
    issue_resolved_date: Time.current,
    issue_resolution: resolution_text
  )
end

def complete_communication
  # å®Œæˆæ²Ÿé€šå·¥å•
  finish_communication
  update(
    completion_time: Time.current
  )
end
```
## ç”¨æˆ·ç•Œé¢è®¾è®¡

### 1. æŠ¥é”€å•åˆ—è¡¨é¡µ
```
+------------------------------------------+
|  æŠ¥é”€å•åˆ—è¡¨                               |
+------------------------------------------+
|  ç­›é€‰: [çŠ¶æ€â–¼] [æ—¥æœŸèŒƒå›´] [æœç´¢ğŸ”]        |
+------------------------------------------+
|  æŠ¥é”€å•å· | ç”³è¯·äºº | é‡‘é¢ | æ”¶å•çŠ¶æ€ | æŠ¥é”€å•çŠ¶æ€ | æ“ä½œ |
|-----------|-------|------|---------|-----------|------|
|  ER20235  | é½é›æ° | Â¥1,199 | å·²æ”¶å• | å®¡æ ¸ä¸­    | æŸ¥çœ‹ |
|  ER19912  | æå©·å©· | Â¥3,305 | å·²æ”¶å• | å®¡æ ¸ä¸­    | æŸ¥çœ‹ |
|  ER19875  | å§œä¸€å® | Â¥1,000 | å·²æ”¶å• | å·²å®Œæˆ    | æŸ¥çœ‹ |
|  ER20508  | ç‹ç´   | Â¥5,464 | æœªæ”¶å• | å¾…å®¡æ ¸    | æŸ¥çœ‹ |
+------------------------------------------+
|  [å¯¼å…¥æŠ¥é”€å•] [å¯¼å…¥å¿«é€’æ”¶å•] [å¯¼å…¥è´¹ç”¨æ˜ç»†] [å¯¼å…¥æ“ä½œå†å²] |
+------------------------------------------+
```

### 2. æŠ¥é”€å•è¯¦æƒ…é¡µ
```
+------------------------------------------+
|  æŠ¥é”€å•è¯¦æƒ…: ER20235830                  |
+------------------------------------------+
|  åŸºæœ¬ä¿¡æ¯                                 |
|  ç”³è¯·äºº: é½é›æ°                           |
|  é‡‘é¢: Â¥1,199.00                         |
|  æ”¶å•çŠ¶æ€: å·²æ”¶å•                         |
|  æŠ¥é”€å•çŠ¶æ€: å®¡æ ¸ä¸­                       |
|  æ ‡ç­¾: å­¦æœ¯ä¼šè®®æŠ¥é”€å•                     |
|                                          |
|  å¿«é€’ä¿¡æ¯                                 |
|  +--------------------------------------+|
|  | å¿«é€’å•å· | æ”¶ä»¶æ—¥æœŸ | æ”¶ä»¶äºº          ||
|  |---------|---------|----------------||
|  | SF12345 | 2025-03-15 | æå››         ||
|  +--------------------------------------+|
|                                          |
|  è´¹ç”¨æ˜ç»†                                 |
|  +--------------------------------------+|
|  | â–¡ | ç±»å‹ | é‡‘é¢ | çŠ¶æ€ | æ“ä½œ        ||
|  |---|------|------|------|------------||
|  | â˜‘ | ä¼šè®®è´¹ | Â¥1,199 | å¾…éªŒè¯ | æŸ¥çœ‹   ||
|  +--------------------------------------+|
|  [åˆ›å»ºå·¥å•] å·²é€‰æ‹©: 1é¡¹                   |
|                                          |
|  æ“ä½œå†å²                                 |
|  +--------------------------------------+|
|  | æ“ä½œç±»å‹ | æ“ä½œæ—¶é—´ | æ“ä½œäºº | æ“ä½œæ„è§ ||
|  |---------|---------|-------|--------||
|  | åˆ é™¤å•æ® | 2025-03-31 | é½é›æ° |      ||
|  +--------------------------------------+|
|                                          |
|  å…³è”å·¥å•                                 |
|  +--------------------------------------+|
|  | å·¥å•å· | ç±»å‹ | çŠ¶æ€ | åˆ›å»ºæ—¶é—´ | æ“ä½œ ||
|  |-------|------|------|---------|------||
|  | #001  | æ”¶ä»¶ | å®Œæˆ | 03-31   | æŸ¥çœ‹ ||
|  | #003  | å®¡æ ¸ | å¤„ç†ä¸­| 03-31   | æŸ¥çœ‹ ||
|  +--------------------------------------+|
+------------------------------------------+
```

### 3. å·¥å•åˆ—è¡¨é¡µ
```
+------------------------------------------+
|  å·¥å•åˆ—è¡¨                                 |
+------------------------------------------+
|  ç­›é€‰: [ç±»å‹â–¼] [çŠ¶æ€â–¼] [æœç´¢ğŸ”]           |
+------------------------------------------+
|  å·¥å•å· | æŠ¥é”€å•å· | ç±»å‹ | çŠ¶æ€ | åˆ›å»ºæ—¶é—´ | æ“ä½œ |
|---------|---------|------|------|---------|------|
|  #001   | ER20235 | æ”¶ä»¶ | å®Œæˆ  | 03-31   | æŸ¥çœ‹ |
|  #002   | ER19912 | å®¡æ ¸ | å¤„ç†ä¸­| 03-31   | æŸ¥çœ‹ |
|  #003   | ER19912 | æ²Ÿé€š | å¾…å›å¤| 04-01   | æŸ¥çœ‹ |
|  #004   | ER19875 | å®¡æ ¸ | å®Œæˆ  | 03-30   | æŸ¥çœ‹ |
+------------------------------------------+
```

### 4. å·¥å•è¯¦æƒ…é¡µ
```
+------------------------------------------+
|  å·¥å•è¯¦æƒ…: #002                          |
+------------------------------------------+
|  åŸºæœ¬ä¿¡æ¯                                 |
|  æŠ¥é”€å•å·: ER19912                        |
|  ç±»å‹: å®¡æ ¸å·¥å•                           |
|  çŠ¶æ€: å¤„ç†ä¸­                             |
|  åˆ›å»ºæ—¶é—´: 2025-03-31                     |
|                                          |
|  æŠ¥é”€å•ä¿¡æ¯                               |
|  ç”³è¯·äºº: æå©·å©·                           |
|  é‡‘é¢: Â¥3,305.10                         |
|  å•æ®ç±»å‹: ä¸ªäººæ—¥å¸¸å’Œå·®æ—…æŠ¥é”€å•            |
|                                          |
|  é€‰ä¸­çš„è´¹ç”¨æ˜ç»†                           |
|  +--------------------------------------+|
|  | ç±»å‹ | é‡‘é¢ | éªŒè¯çŠ¶æ€ | è®¨è®ºç»“æœ     ||
|  |------|------|---------|-------------||
|  | é¤è´¹ | Â¥300 | éªŒè¯ä¸­  | éœ€æä¾›å‘ç¥¨   ||
|  +--------------------------------------+|
|                                          |
|  æ²Ÿé€šè®°å½•                                 |
|  +--------------------------------------+|
|  | æ—¶é—´ | è§’è‰² | å§“å | å†…å®¹ | çŠ¶æ€      ||
|  |------|------|------|------|----------||
|  | 03-31| è´¢åŠ¡ | ç‹äº” | è¯·æä¾›é¤è´¹å‘ç¥¨ | å·²å‘é€ ||
|  | 04-01| ç”³è¯·äºº| æå©·å©·| å·²é‚®å¯„å‘ç¥¨ | å·²å›å¤ ||
|  +--------------------------------------+|
|                                          |
|  å…³è”å·¥å•                                |
|  +--------------------------------------+|
|  | å·¥å•å· | ç±»å‹ | çŠ¶æ€ | å…³ç³» | æ“ä½œ    ||
|  |-------|------|------|------|--------||
|  | #001  | æ”¶ä»¶ | å®Œæˆ | çˆ¶å·¥å• | æŸ¥çœ‹   ||
|  | #003  | æ²Ÿé€š | å¾…å›å¤| å­å·¥å• | æŸ¥çœ‹   ||
|  +--------------------------------------+|
|                                          |
|  çŠ¶æ€å˜æ›´å†å²                             |
|  +--------------------------------------+|
|  | å˜æ›´å‰ | å˜æ›´å | æ“ä½œäºº | å˜æ›´æ—¶é—´   ||
|  |--------|--------|--------|----------||
|  | å¾…å¤„ç† | å¤„ç†ä¸­ | ç‹äº”   | 03-31    ||
|  | å¤„ç†ä¸­ | å®¡æ ¸ä¸­ | ç‹äº”   | 04-01    ||
|  +--------------------------------------+|
|                                          |
|  æ·»åŠ æ²Ÿé€šè®°å½•                             |
|  è§’è‰²: [è´¢åŠ¡â–¼]                           |
|  å§“å: [è¾“å…¥æ¡†]                           |
|  å†…å®¹: [æ–‡æœ¬è¾“å…¥æ¡†]                       |
|  æ–¹å¼: [ç³»ç»Ÿâ–¼]                           |
|  [æ·»åŠ æ²Ÿé€šè®°å½•]                           |
|                                          |
|  [å¼€å§‹å®¡æ ¸] [å®¡æ ¸é€šè¿‡] [å®¡æ ¸ä¸é€šè¿‡] [å®¡æ ¸æš‚ç¼“] |
|  [æ ‡è®°å®Œæˆ] [å–æ¶ˆå·¥å•]                     |
+------------------------------------------+
```

## æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 1. åŸºäºRailså’ŒActiveAdminçš„å®ç°

- **ä½¿ç”¨ç°æœ‰é¡¹ç›®æ¡†æ¶**ï¼šåŸºäºå½“å‰Railsé¡¹ç›®
- **åˆ©ç”¨ActiveAdminç»„ä»¶**ï¼šå¿«é€Ÿæ„å»ºç®¡ç†ç•Œé¢
- **æ•°æ®å¯¼å…¥åŠŸèƒ½**ï¼šä½¿ç”¨CSVå¯¼å…¥åŠŸèƒ½
- **çŠ¶æ€æœºå®ç°**ï¼šä½¿ç”¨state_machines-activerecord gem
- **å•è¡¨ç»§æ‰¿**ï¼šä½¿ç”¨STIå®ç°å·¥å•ç±»å‹
- **å…³è”å…³ç³»**ï¼šä½¿ç”¨belongs_toå’Œhas_manyå®ç°å·¥å•å…³è”

### 2. å…³é”®åŠŸèƒ½å®ç°

#### å·¥å•çŠ¶æ€æµè½¬
```ruby
# åœ¨WorkOrderæ¨¡å‹ä¸­
# åŸºç¡€çŠ¶æ€æœºï¼ˆæ‰€æœ‰å·¥å•å…±äº«ï¼‰
state_machine :status, initial: STATUS_PENDING do
  event :start_processing do
    transition STATUS_PENDING => STATUS_PROCESSING
  end
  
  event :complete do
    transition any => STATUS_COMPLETED
  end
  
  event :cancel do
    transition any => STATUS_CANCELLED
  end
end

# å¿«é€’æ”¶å•å·¥å•çŠ¶æ€æœºæ‰©å±•
state_machine :status do
  event :mark_as_received do
    transition STATUS_PROCESSING => STATUS_RECEIVED
  end
  
  event :finish_receipt do
    transition STATUS_RECEIVED => STATUS_COMPLETED
  end
end

# å®¡æ ¸å·¥å•çŠ¶æ€æœºæ‰©å±•
state_machine :status do
  event :start_audit do
    transition STATUS_PROCESSING => STATUS_AUDITING
  end
  
  event :approve_audit do
    transition STATUS_AUDITING => STATUS_APPROVED
  end
  
  event :reject_audit do
    transition STATUS_AUDITING => STATUS_REJECTED
  end
  
  event :pend_audit do
    transition STATUS_AUDITING => STATUS_PENDING_APPROVAL
  end
  
  event :resume_audit do
    transition STATUS_PENDING_APPROVAL => STATUS_AUDITING
  end
  
  event :finish_audit do
    transition [STATUS_APPROVED, STATUS_REJECTED] => STATUS_COMPLETED
  end
end

# é—®é¢˜å·¥å•çŠ¶æ€æœºæ‰©å±•
state_machine :status do
  event :need_communication do
    transition STATUS_PROCESSING => STATUS_COMMUNICATION_NEEDED
  end
  
  event :send_communication do
    transition STATUS_COMMUNICATION_NEEDED => STATUS_WAITING_REPLY
  end
  
  event :receive_reply do
    transition STATUS_WAITING_REPLY => STATUS_REPLIED
  end
  
  event :continue_communication do
    transition STATUS_REPLIED => STATUS_COMMUNICATION_NEEDED
  end
  
  event :resolve_issue do
    transition STATUS_REPLIED => STATUS_ISSUE_RESOLVED
  end
  
  event :finish_communication do
    transition STATUS_ISSUE_RESOLVED => STATUS_COMPLETED
  end
end
```

#### å·¥å•å…³è”å…³ç³»
```ruby
# åœ¨WorkOrderæ¨¡å‹ä¸­
# å·¥å•å…³è”å…³ç³»
belongs_to :parent_work_order, class_name: 'WorkOrder', optional: true
has_many :child_work_orders, class_name: 'WorkOrder', foreign_key: 'parent_work_order_id', dependent: :nullify

# è®°å½•çŠ¶æ€å˜æ›´
has_many :status_changes, class_name: 'WorkOrderStatusChange', dependent: :destroy
after_save :record_status_change, if: :saved_change_to_status?

private

# è®°å½•çŠ¶æ€å˜æ›´
def record_status_change
  previous_status = status_before_last_save
  current_status = status
  
  # åˆ›å»ºçŠ¶æ€å˜æ›´è®°å½•
  WorkOrderStatusChange.record_change(
    self,
    previous_status,
    current_status,
    operator,
    nil # å˜æ›´åŸå› å¯ä»¥åœ¨ç‰¹å®šæ–¹æ³•ä¸­è®¾ç½®
  )
end
```

## å¼€å‘è®¡åˆ’

### 1. é˜¶æ®µä¸€ï¼šæ•°æ®æ¨¡å‹æ›´æ–°ï¼ˆ1å‘¨ï¼‰
- åˆ›å»ºæ–°çš„æ•°æ®åº“è¿ç§»æ–‡ä»¶
- æ·»åŠ å·¥å•çŠ¶æ€å˜æ›´è¡¨
- æ›´æ–°å·¥å•è¡¨ï¼Œå¢åŠ çˆ¶å­å…³ç³»å­—æ®µ
- å®ç°æ¨¡å‹ä¹‹é—´çš„å…³è”å…³ç³»

### 2. é˜¶æ®µäºŒï¼šçŠ¶æ€æµè½¬ç³»ç»Ÿå®ç°ï¼ˆ1å‘¨ï¼‰
- å®ç°ç»Ÿä¸€çš„åŸºç¡€çŠ¶æ€æµè½¬
- å®ç°å„ç±»å‹å·¥å•çš„ç‰¹å®šçŠ¶æ€æµè½¬
- å®ç°çŠ¶æ€å˜æ›´è®°å½•åŠŸèƒ½
- æµ‹è¯•çŠ¶æ€æµè½¬é€»è¾‘

### 3. é˜¶æ®µä¸‰ï¼šå·¥å•å…³è”å…³ç³»å®ç°ï¼ˆ1å‘¨ï¼‰
- å®ç°çˆ¶å­å·¥å•å…³ç³»
- å®ç°å·¥å•åˆ›å»ºæ—¶è‡ªåŠ¨å»ºç«‹å…³è”
- åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºå·¥å•å…³è”å…³ç³»
- æµ‹è¯•å·¥å•å…³è”åŠŸèƒ½

### 4. é˜¶æ®µå››ï¼šå¤šè½®æ²Ÿé€šåŠŸèƒ½ï¼ˆ2å‘¨ï¼‰
- å®ç°æ²Ÿé€šè®°å½•çš„æ·»åŠ å’Œç®¡ç†
- å¼€å‘å·¥å•çŠ¶æ€çš„è‡ªåŠ¨æ›´æ–°é€»è¾‘
- å®ç°è´¹ç”¨æ˜ç»†éªŒè¯çŠ¶æ€çš„æ›´æ–°
- æµ‹è¯•å®Œæ•´çš„å¤šè½®æ²Ÿé€šæµç¨‹

### 5. é˜¶æ®µäº”ï¼šç”¨æˆ·ç•Œé¢ä¼˜åŒ–ä¸æµ‹è¯•ï¼ˆ1å‘¨ï¼‰
- ä¼˜åŒ–å·¥å•çŠ¶æ€æ˜¾ç¤º
- å®ç°çŠ¶æ€å˜æ›´å†å²æ˜¾ç¤º
- è¿›è¡Œç³»ç»Ÿé›†æˆæµ‹è¯•
- éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒå¹¶æ”¶é›†åé¦ˆ

## ä½¿ç”¨æµç¨‹

### å¯¼å…¥æ•°æ®çš„æ­£ç¡®é¡ºåº

1. å¯¼å…¥æŠ¥é”€å•æ•°æ®
   - ä½¿ç”¨æŠ¥é”€å•æŠ¥è¡¨CSVæ–‡ä»¶
   - å»ºç«‹åŸºç¡€æ•°æ®

2. å¯¼å…¥å¿«é€’æ”¶å•æ•°æ®
   - ä½¿ç”¨å¿«é€’æ”¶å•CSVæ–‡ä»¶
   - ç³»ç»Ÿä¼šè‡ªåŠ¨åŒ¹é…æŠ¥é”€å•
   - å¯¹äºæœªåŒ¹é…çš„å¿«é€’å•ï¼Œå¯ä»¥æ‰‹åŠ¨åŒ¹é…æˆ–å¿½ç•¥

3. å¯¼å…¥è´¹ç”¨æ˜ç»†æ•°æ®
   - ä½¿ç”¨è´¹ç”¨æ˜ç»†CSVæ–‡ä»¶
   - å…³è”åˆ°å¯¹åº”çš„æŠ¥é”€å•

4. å¯¼å…¥æ“ä½œå†å²æ•°æ®
   - ä½¿ç”¨æ“ä½œå†å²CSVæ–‡ä»¶
   - æ›´æ–°æŠ¥é”€å•çŠ¶æ€
   - å¯¹äºå®¡æ‰¹é€šè¿‡çš„æŠ¥é”€å•ï¼Œè‡ªåŠ¨æ ‡è®°ä¸ºå·²å…³é—­

### å·¥å•å¤„ç†æµç¨‹

1. å¿«é€’æ”¶å•å·¥å•å¤„ç†
   - ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºæ”¶ä»¶å·¥å•
   - å¼€å§‹å¤„ç†å·¥å•
   - æ ‡è®°ä¸ºå·²ç­¾æ”¶
   - å®Œæˆå¤„ç†ï¼ˆè‡ªåŠ¨åˆ›å»ºå®¡æ ¸å·¥å•ï¼‰

2. å®¡æ ¸å·¥å•å¤„ç†
   - å¼€å§‹å¤„ç†å·¥å•
   - å¼€å§‹å®¡æ ¸
   - é€‰æ‹©å®¡æ ¸ç»“æœï¼ˆé€šè¿‡/ä¸é€šè¿‡/æš‚ç¼“ï¼‰
   - å¦‚æœå®¡æ ¸æš‚ç¼“ï¼Œåˆ›å»ºé—®é¢˜å·¥å•
   - å®Œæˆå¤„ç†

3. é—®é¢˜å·¥å•å¤„ç†
   - å¼€å§‹å¤„ç†å·¥å•
   - æ ‡è®°ä¸ºéœ€æ²Ÿé€š
   - å‘é€æ²Ÿé€š
   - è®°å½•å›å¤
   - å¦‚æœé—®é¢˜æœªè§£å†³ï¼Œç»§ç»­æ²Ÿé€š
   - å¦‚æœé—®é¢˜å·²è§£å†³ï¼Œæ ‡è®°ä¸ºå·²è§£å†³
   - å®Œæˆå¤„ç†

## æ³¨æ„äº‹é¡¹

- ç¡®ä¿æŒ‰ç…§æ­£ç¡®çš„é¡ºåºå¯¼å…¥æ•°æ®ï¼šå…ˆæŠ¥é”€å•ï¼Œå†å¿«é€’æ”¶å•ï¼Œç„¶åè´¹ç”¨æ˜ç»†ï¼Œæœ€åæ“ä½œå†å²
- è´¹ç”¨æ˜ç»†å¤šé€‰åŠŸèƒ½éœ€è¦è‡³å°‘é€‰æ‹©ä¸€ä¸ªè´¹ç”¨æ˜ç»†æ‰èƒ½åˆ›å»ºå·¥å•
- æ²Ÿé€šè®°å½•æ·»åŠ åä¼šè‡ªåŠ¨æ›´æ–°å·¥å•çŠ¶æ€
- æ“ä½œå†å²ä¸­çš„å®¡æ‰¹é€šè¿‡è®°å½•ä¼šè‡ªåŠ¨å…³é—­æŠ¥é”€å•
- æœªåŒ¹é…çš„å¿«é€’å•éœ€è¦æ‰‹åŠ¨å¤„ç†ï¼Œå¯ä»¥é€‰æ‹©æ‰‹åŠ¨åŒ¹é…æˆ–å¿½ç•¥
- å·¥å•çŠ¶æ€å˜æ›´ä¼šè‡ªåŠ¨è®°å½•ï¼Œå¯ä»¥åœ¨å·¥å•è¯¦æƒ…é¡µæŸ¥çœ‹å®Œæ•´çš„çŠ¶æ€å˜æ›´å†å²
- å·¥å•ä¹‹é—´çš„å…³è”å…³ç³»ä¼šè‡ªåŠ¨å»ºç«‹ï¼Œå¯ä»¥åœ¨å·¥å•è¯¦æƒ…é¡µæŸ¥çœ‹çˆ¶å­å·¥å•

## åç»­æ‰©å±•è®¡åˆ’

- ä¼˜åŒ–ç”¨æˆ·ç•Œé¢ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- å¢åŠ æ•°æ®ç»Ÿè®¡å’ŒæŠ¥è¡¨åŠŸèƒ½
- å®Œå–„æƒé™ç®¡ç†
- å¢åŠ æ‰¹é‡å¤„ç†åŠŸèƒ½
- å®ç°å·¥å•åˆ†é…åŠŸèƒ½
- å¼€å‘å·¥å•è¶…æ—¶æé†’åŠŸèƒ½
- å¢åŠ çŠ¶æ€è·Ÿè¸ªçœ‹æ¿
- å®ç°å…³è”æ•°æ®å¯¼å‡º
- å¢åŠ å·¥å•å¤„ç†æ•ˆç‡åˆ†æåŠŸèƒ½