# SCI2 工单系统用户界面设计与用户故事

## 1. 概述

本文档描述了SCI2工单系统的用户界面设计和用户故事，旨在提供一个直观、高效的用户体验。系统基于ActiveAdmin框架实现，主要面向财务部门的审核人员和沟通人员，用于管理报销单的收单、审核和沟通等流程。

## 2. 用户角色

系统主要面向以下用户角色：

1. **系统管理员**：负责系统配置、用户管理和数据维护
2. **审核人员**：负责审核报销单和费用明细
3. **沟通人员**：负责与申请人沟通解决问题
4. **导入操作员**：负责导入报销单、快递收单、费用明细和操作历史数据

## 3. 用户界面设计原则

1. **简洁明了**：界面设计简洁，信息展示清晰，减少用户认知负担
2. **一致性**：保持界面元素和交互方式的一致性，提高用户学习效率
3. **响应式**：适应不同设备和屏幕尺寸，提供良好的移动体验
4. **高效性**：减少操作步骤，提高工作效率
5. **可访问性**：考虑不同用户的需求，提供无障碍访问功能
6. **反馈性**：提供及时、清晰的操作反馈，增强用户信心

## 4. 主要界面设计

### 4.1 仪表盘

仪表盘是系统的首页，提供系统概览和快速操作入口。

**设计要点**：
- 顶部显示关键统计数据：报销单总数、待处理报销单数、待处理工单数、待验证费用明细数
- 中部显示待处理的审核工单和沟通工单列表，方便用户快速进入工作
- 右侧提供快速操作区域，包括新建报销单、导入数据等常用操作
- 底部可显示系统公告或最近活动

### 4.2 报销单管理界面

报销单管理界面是系统的核心，用于查看和管理所有报销单。

**设计要点**：
- 列表页显示报销单的关键信息：单号、申请人、金额、状态等
- 提供丰富的过滤和排序功能，方便用户查找特定报销单
- 详情页使用标签页组织信息，包括基本信息、工单信息、费用明细、操作历史等
- 详情页提供创建工单的入口，方便用户快速创建审核工单或沟通工单
- 导入功能支持CSV和Excel格式，提供清晰的导入说明和错误反馈

### 4.3 工单管理界面

工单管理界面用于处理各类工单，包括快递收单工单、审核工单和沟通工单。

**设计要点**：
- 列表页按工单类型分类，显示工单的关键信息：ID、关联报销单、状态等
- 详情页使用标签页组织信息，包括基本信息、费用明细、状态变更历史等
- 提供状态流转按钮，方便用户快速处理工单
- 审核工单和沟通工单表单包含共享字段（问题类型、问题说明、备注、处理意见）
- 沟通工单详情页提供添加沟通记录的功能
- 费用明细验证界面简洁明了，方便用户快速验证费用明细

### 4.4 费用明细管理界面

费用明细管理界面用于查看和管理所有费用明细。

**设计要点**：
- 列表页显示费用明细的关键信息：ID、报销单号、费用类型、金额、验证状态等
- 详情页显示费用明细的详细信息和关联工单
- 提供验证状态更新功能，方便用户手动更新费用明细的验证状态
- 导入功能支持CSV和Excel格式，提供清晰的导入说明和错误反馈

### 4.5 操作历史管理界面

操作历史管理界面用于查看和管理所有操作历史记录。

**设计要点**：
- 列表页显示操作历史的关键信息：ID、报销单号、操作类型、操作人、操作时间等
- 详情页显示操作历史的详细信息
- 导入功能支持CSV和Excel格式，提供清晰的导入说明和错误反馈

## 5. 用户故事

### 5.1 系统管理员

**用户故事1：系统配置**

作为系统管理员，我希望能够配置系统参数，以便系统能够满足业务需求。

**验收标准**：
- 能够配置问题类型、问题说明、处理意见等下拉列表选项
- 能够配置用户权限和角色
- 能够查看系统日志和操作记录

**用户故事2：用户管理**

作为系统管理员，我希望能够管理用户账号，以便控制系统访问权限。

**验收标准**：
- 能够创建、编辑和删除用户账号
- 能够分配用户角色和权限
- 能够重置用户密码

### 5.2 审核人员

**用户故事3：审核工单处理**

作为审核人员，我希望能够方便地处理审核工单，以便高效完成审核工作。

**验收标准**：
- 能够在仪表盘上看到待处理的审核工单
- 能够查看报销单详情和费用明细
- 能够选择费用明细并创建审核工单
- 能够填写问题类型、问题说明、备注和处理意见
- 能够将工单状态从"待处理"变更为"处理中"
- 能够将工单状态从"处理中"变更为"通过"或"拒绝"
- 能够验证费用明细的状态

**用户故事4：费用明细验证**

作为审核人员，我希望能够方便地验证费用明细，以便确保费用明细的正确性。

**验收标准**：
- 能够查看费用明细的详细信息
- 能够更新费用明细的验证状态（待处理、有问题、已验证）
- 能够添加验证意见
- 能够查看费用明细关联的所有工单

### 5.3 沟通人员

**用户故事5：沟通工单处理**

作为沟通人员，我希望能够方便地处理沟通工单，以便高效完成沟通工作。

**验收标准**：
- 能够在仪表盘上看到待处理的沟通工单
- 能够查看报销单详情和费用明细
- 能够选择费用明细并创建沟通工单
- 能够填写问题类型、问题说明、备注和处理意见
- 能够将工单状态从"待处理"变更为"处理中"或"需要沟通"
- 能够将工单状态从"处理中"或"需要沟通"变更为"通过"或"拒绝"
- 能够添加沟通记录
- 能够验证费用明细的状态

**用户故事6：沟通记录管理**

作为沟通人员，我希望能够方便地管理沟通记录，以便记录沟通过程和结果。

**验收标准**：
- 能够添加沟通记录，包括沟通内容、沟通角色、沟通人姓名和沟通方式
- 能够查看沟通记录历史
- 能够根据沟通结果更新工单状态

### 5.4 导入操作员

**用户故事7：数据导入**

作为导入操作员，我希望能够方便地导入各类数据，以便初始化系统数据。

**验收标准**：
- 能够导入报销单数据，支持CSV和Excel格式
- 能够导入快递收单数据，支持CSV和Excel格式
- 能够导入费用明细数据，支持CSV和Excel格式
- 能够导入操作历史数据，支持CSV和Excel格式
- 导入过程中能够处理重复记录和错误情况
- 导入完成后能够查看导入结果和错误详情

## 6. 用户流程

### 6.1 报销单审核流程

1. 导入操作员导入报销单、快递收单、费用明细和操作历史数据
2. 系统自动创建快递收单工单（状态为"已完成"）
3. 审核人员在报销单详情页创建审核工单
4. 审核人员选择费用明细，填写问题类型、问题说明、备注和处理意见
5. 审核人员将工单状态从"待处理"变更为"处理中"
6. 审核人员验证费用明细
7. 审核人员将工单状态从"处理中"变更为"通过"或"拒绝"
8. 如果拒绝，沟通人员创建沟通工单
9. 沟通人员选择费用明细，填写问题类型、问题说明、备注和处理意见
10. 沟通人员将工单状态从"待处理"变更为"处理中"或"需要沟通"
11. 沟通人员添加沟通记录
12. 沟通人员将工单状态从"处理中"或"需要沟通"变更为"通过"或"拒绝"
13. 当所有费用明细都验证通过时，报销单状态自动变为"等待完成"
14. 当导入的操作历史中包含审批通过记录时，报销单状态自动变为"已关闭"

### 6.2 报销单查询流程

1. 用户在报销单列表页使用过滤和排序功能查找特定报销单
2. 用户点击报销单进入详情页
3. 用户可以查看报销单的基本信息、工单信息、费用明细和操作历史
4. 用户可以根据需要创建审核工单或沟通工单

### 6.3 费用明细验证流程

1. 用户在工单详情页查看关联的费用明细
2. 用户点击"更新验证状态"按钮进入费用明细验证界面
3. 用户选择验证状态（待处理、有问题、已验证）并填写验证意见
4. 用户提交验证结果
5. 系统更新费用明细的验证状态
6. 当所有费用明细都验证通过时，报销单状态自动变为"等待完成"

## 7. 界面原型

### 7.1 仪表盘

```
+----------------------------------------------------------------------+
|                           SCI2工单系统                                |
+----------------------------------------------------------------------+
| 仪表盘 | 报销单管理 | 工单管理 | 基础数据 | 系统管理 | 用户: 管理员 ▼ |
+----------------------------------------------------------------------+
|                                                                      |
| 系统概览                                                             |
| +----------------+ +----------------+ +----------------+ +----------+ |
| | 报销单总数     | | 待处理报销单   | | 待处理工单     | | 待验证费用| |
| | 1,234          | | 56             | | 23             | | 78        | |
| | 5 今日新增     | | 12 等待完成    | | 10 处理中      | | 45 已验证 | |
| +----------------+ +----------------+ +----------------+ +----------+ |
|                                                                      |
| 待处理审核工单                      | 待处理沟通工单                 |
| +------------------------------+    | +---------------------------+  |
| | ID | 报销单 | 状态 | 创建时间 |    | | ID | 报销单 | 状态 | 创建时间|  |
| +------------------------------+    | +---------------------------+  |
| | #1 | R2025.. | 待处理 | 04-28 |    | | #5 | R2025.. | 待处理 | 04-28|  |
| | #2 | R2025.. | 待处理 | 04-28 |    | | #6 | R2025.. | 待处理 | 04-28|  |
| | #3 | R2025.. | 待处理 | 04-27 |    | | #7 | R2025.. | 待处理 | 04-27|  |
| | #4 | R2025.. | 待处理 | 04-27 |    | | #8 | R2025.. | 待处理 | 04-27|  |
| +------------------------------+    | +---------------------------+  |
| | 查看全部                     |    | | 查看全部                  |  |
| +------------------------------+    | +---------------------------+  |
|                                                                      |
| 最近导入的报销单                    | 快速操作                       |
| +------------------------------+    | +---------------------------+  |
| | 单号 | 申请人 | 状态 | 创建时间 |    | | + 新建报销单              |  |
| +------------------------------+    | | ↓ 导入报销单              |  |
| | R2025.. | 张三 | 待处理 | 04-28 |    | | ↓ 导入快递收单           |  |
| | R2025.. | 李四 | 待处理 | 04-28 |    | | ↓ 导入费用明细           |  |
| | R2025.. | 王五 | 处理中 | 04-27 |    | | ↓ 导入操作历史           |  |
| | R2025.. | 赵六 | 处理中 | 04-27 |    | +---------------------------+  |
| +------------------------------+    |                                 |
| | 查看全部                     |    |                                 |
| +------------------------------+    |                                 |
+----------------------------------------------------------------------+
```

### 7.2 报销单详情页

```
+----------------------------------------------------------------------+
|                           SCI2工单系统                                |
+----------------------------------------------------------------------+
| 仪表盘 | 报销单管理 | 工单管理 | 基础数据 | 系统管理 | 用户: 管理员 ▼ |
+----------------------------------------------------------------------+
| 报销单 #R202504280001                                                |
+----------------------------------------------------------------------+
| 新建审核工单 | 新建沟通工单 |                                        |
+----------------------------------------------------------------------+
| 基本信息 | 快递收单工单 | 审核工单 | 沟通工单 | 费用明细 | 操作历史   |
+----------------------------------------------------------------------+
|                                                                      |
| 基本信息                                                             |
| +----------------------------------+                                 |
| | ID                | 1            |                                 |
| | 报销单单号        | R202504280001|                                 |
| | 单据名称          | 差旅费报销   |                                 |
| | 申请人            | 张三         |                                 |
| | 申请人工号        | ZS001        |                                 |
| | 公司              | 示例公司     |                                 |
| | 部门              | 研发部       |                                 |
| | 金额              | ¥1,234.56    |                                 |
| | 内部状态          | 处理中       |                                 |
| | 外部状态          | 审批中       |                                 |
| | 收单状态          | 已收单       |                                 |
| | 收单日期          | 2025-04-25   |                                 |
| | 提交报销日期      | 2025-04-24   |                                 |
| | 电子发票          | 是           |                                 |
| | 审批通过日期      |              |                                 |
| | 审批通过人        |              |                                 |
| | 创建时间          | 2025-04-28   |                                 |
| | 更新时间          | 2025-04-28   |                                 |
| +----------------------------------+                                 |
|                                                                      |
+----------------------------------------------------------------------+
```

### 7.3 审核工单表单

```
+----------------------------------------------------------------------+
|                           SCI2工单系统                                |
+----------------------------------------------------------------------+
| 仪表盘 | 报销单管理 | 工单管理 | 基础数据 | 系统管理 | 用户: 管理员 ▼ |
+----------------------------------------------------------------------+
| 新建审核工单                                                         |
+----------------------------------------------------------------------+
|                                                                      |
| 基本信息                                                             |
| +----------------------------------+                                 |
| | 报销单            | R202504280001|                                 |
| | 状态              | 待处理       |                                 |
| | 问题类型          | [下拉列表]   |                                 |
| | 问题说明          | [下拉列表]   |                                 |
| | 备注              | [文本框]     |                                 |
| | 处理意见          | [下拉列表]   |                                 |
| | 审核意见          | [文本框]     |                                 |
| | 增值税已验证      | [ ]          |                                 |
| +----------------------------------+                                 |
|                                                                      |
| 选择费用明细                                                         |
| +------------------------------------------------------------------+ |
| | [ ] 全选/取消全选                                                | |
| | [ ] #1 交通费 (¥123.45) - 待处理                                 | |
| | [ ] #2 住宿费 (¥456.78) - 待处理                                 | |
| | [ ] #3 餐费 (¥78.90) - 待处理                                    | |
| | [ ] #4 办公用品 (¥45.67) - 待处理                                | |
| +------------------------------------------------------------------+ |
|                                                                      |
| [提交] [取消]                                                        |
|                                                                      |
+----------------------------------------------------------------------+
```

### 7.4 沟通工单详情页

```
+----------------------------------------------------------------------+
|                           SCI2工单系统                                |
+----------------------------------------------------------------------+
| 仪表盘 | 报销单管理 | 工单管理 | 基础数据 | 系统管理 | 用户: 管理员 ▼ |
+----------------------------------------------------------------------+
| 沟通工单 #5                                                          |
+----------------------------------------------------------------------+
| 开始处理 | 标记需沟通 | 沟通后通过 | 沟通后拒绝 | 添加沟通记录       |
+----------------------------------------------------------------------+
| 基本信息 | 沟通记录 | 费用明细 | 状态变更历史                        |
+----------------------------------------------------------------------+
|                                                                      |
| 基本信息                                                             |
| +----------------------------------+                                 |
| | ID                | 5            |                                 |
| | 报销单            | R202504280001|                                 |
| | 审核工单          | #1           |                                 |
| | 类型              | CommunicationWorkOrder |                       |
| | 状态              | 待处理       |                                 |
| | 沟通方式          | 电话         |                                 |
| | 发起人角色        | 审核人       |                                 |
| | 解决摘要          |              |                                 |
| | 问题类型          | 问题类型A    |                                 |
| | 问题说明          | 问题描述1    |                                 |
| | 备注              | 需要沟通     |                                 |
| | 处理意见          | 处理意见X    |                                 |
| | 创建人            | admin@example.com |                            |
| | 创建时间          | 2025-04-28   |                                 |
| | 更新时间          | 2025-04-28   |                                 |
| +----------------------------------+                                 |
|                                                                      |
+----------------------------------------------------------------------+
```

### 7.5 费用明细验证界面

```
+----------------------------------------------------------------------+
|                           SCI2工单系统                                |
+----------------------------------------------------------------------+
| 仪表盘 | 报销单管理 | 工单管理 | 基础数据 | 系统管理 | 用户: 管理员 ▼ |
+----------------------------------------------------------------------+
| 验证费用明细 #1 - 审核工单 #1                                        |
+----------------------------------------------------------------------+
|                                                                      |
| +------------------------------------------------------------------+ |
| | 费用类型          | 交通费                                        | |
| | 金额              | ¥123.45                                       | |
| | 当前全局状态      | 待处理                                        | |
| | 当前工单内状态    | 待处理                                        | |
| | 设置验证状态 *    | [下拉列表: 待处理, 有问题, 已验证]            | |
| | 验证意见          | [文本框]                                      | |
| +------------------------------------------------------------------+ |
|                                                                      |
| [提交] [取消]                                                        |
|                                                                      |
+----------------------------------------------------------------------+
```

## 8. 总结

本文档描述了SCI2工单系统的用户界面设计和用户故事，为系统实现提供了指导。通过合理的界面设计和用户流程，系统将能够满足用户的需求，提供高效、直观的工单管理体验。

在实现过程中，应注重用户体验，确保界面简洁明了、操作流程清晰，同时考虑不同用户角色的需求，提供针对性的功能和权限控制。